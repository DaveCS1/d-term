<mahapps:MetroWindow
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:dterm="clr-namespace:dTerm.Core;assembly=Sarto.dTerm.Core"
	xmlns:mahapps="http://metro.mahapps.com/winfx/xaml/controls"
	xmlns:viewmodels="clr-namespace:dTerm.UI.Wpf.ViewModels"
	xmlns:materialdesign="http://materialdesigninxaml.net/winfx/xaml/themes"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:wndbase="clr-namespace:System.ComponentModel;assembly=WindowsBase"
	xmlns:local="clr-namespace:dTerm.UI.Wpf.Views"
	xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
	x:Class="dTerm.UI.Wpf.Views.ShellView"
	FontFamily="pack://application:,,,/MaterialDesignThemes.Wpf;component/Resources/Roboto/#Roboto"
	TextElement.Foreground="{DynamicResource MaterialDesignBody}"
	Background="{DynamicResource MaterialDesignPaper}"
	TextOptions.TextFormattingMode="Ideal"
	TextOptions.TextRenderingMode="Auto"
	WindowStartupLocation="CenterScreen"
	TextElement.FontWeight="Regular"
	TextElement.FontSize="13"
	WindowState="Maximized"
	mc:Ignorable="d"
	Title="dTerm" 
	MinHeight="768" 
	MinWidth="1024"
	ShowTitleBar="False"
	x:Name="shellView"
>

	<!--
	<i:Interaction.Triggers>
		<i:EventTrigger EventName="Loaded">
			<ei:CallMethodAction TargetObject="{Binding}" MethodName="Initialize" />
		</i:EventTrigger>
	</i:Interaction.Triggers>
	-->

	<mahapps:MetroWindow.Resources>

		<CollectionViewSource x:Key="consoleOptionsSource" Source="{Binding ConsoleOptions}">
			<CollectionViewSource.SortDescriptions>
				<wndbase:SortDescription PropertyName="DisplayOrder" />
			</CollectionViewSource.SortDescriptions>
			<CollectionViewSource.GroupDescriptions>
				<PropertyGroupDescription PropertyName="IsSupported" />
			</CollectionViewSource.GroupDescriptions>
		</CollectionViewSource>

	</mahapps:MetroWindow.Resources>

	<Grid>

		<Grid>

			<Grid.Style>
				<Style TargetType="Grid">
					<Setter Property="Margin" Value="15 0 15 15" />
					<Setter Property="VerticalAlignment" Value="Bottom" />
				</Style>
			</Grid.Style>

			<!-- Line -->

			<Separator>
				<Separator.Style>
					<Style TargetType="Separator">
						<Setter Property="Height" Value="5" />
						<Setter Property="Background" Value="Black" />
						<Setter Property="BorderBrush" Value="Black" />
						<Setter Property="BorderThickness" Value="5" />
						<Setter Property="VerticalAlignment" Value="Center" />
						<Setter Property="HorizontalAlignment" Value="Stretch" />
					</Style>
				</Separator.Style>
			</Separator>

			<!-- Console options -->

			<Border>

				<Border.Style>
					<Style TargetType="Border">
						<Setter Property="Margin" Value="75 15" />
						<Setter Property="VerticalAlignment" Value="Center" />
						<Setter Property="HorizontalAlignment" Value="Right" />
						<Setter Property="Background" Value="{DynamicResource MaterialDesignPaper}" />
					</Style>
				</Border.Style>

				<ItemsControl ItemsSource="{Binding Source={StaticResource consoleOptionsSource}}">

					<ItemsControl.ItemsPanel>
						<ItemsPanelTemplate>
							<StackPanel Margin="15 0" Orientation="Horizontal" />
						</ItemsPanelTemplate>
					</ItemsControl.ItemsPanel>

					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<Button>
								<Button.Style>
									<Style TargetType="Button" BasedOn="{StaticResource consoleOptionButtonStyle}">
										<Setter Property="ToolTip" Value="{Binding Description}" />
										<Setter Property="IsEnabled" Value="{Binding IsSupported}" />
										<Setter Property="CommandParameter" Value="{Binding}" />
										<Setter Property="Command" Value="{Binding DataContext.CreateConsoleProcessInstanceCommand, ElementName=shellView}" />
									</Style>
								</Button.Style>
							</Button>
						</DataTemplate>
					</ItemsControl.ItemTemplate>

				</ItemsControl>

			</Border>

		</Grid>

		<Ellipse Style="{DynamicResource logoMaskStyle}" />

		<Path Style="{DynamicResource logoVisualStyle}" />

	</Grid>

</mahapps:MetroWindow>
