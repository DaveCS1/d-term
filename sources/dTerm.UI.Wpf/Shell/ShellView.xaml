<Window
	x:Class="dTerm.UI.Wpf.Shell.ShellView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:consoles="clr-namespace:dTerm.UI.Wpf.Consoles"
    FontFamily="pack://application:,,,/MaterialDesignThemes.Wpf;component/Resources/Roboto/#Roboto"
	TextElement.Foreground="{DynamicResource MaterialDesignBody}"
	Background="{DynamicResource MaterialDesignPaper}"
	WindowStartupLocation="CenterScreen"
	TextElement.FontWeight="Medium"
	TextElement.FontSize="14"
	WindowState="Maximized"
	d:DesignWidth="1280"
	d:DesignHeight="800"
	mc:Ignorable="d"
	Title="dTerm"
	MinWidth="1280"
	MinHeight="800"
	x:Name="shellView"
>

	<Grid>

		<Grid.RowDefinitions>
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<Grid>

			<TabControl BorderThickness="0" ItemsSource="{Binding ConsoleInstances}" IsSynchronizedWithCurrentItem="True">

				<TabControl.Resources>

					<Style TargetType="{x:Type TabPanel}">
						<Setter Property="VerticalAlignment" Value="Center"/>
						<Setter Property="HorizontalAlignment" Value="Right"/>
					</Style>

					<Style TargetType="{x:Type TabItem}">
						<Setter Property="Template">
							<Setter.Value>
								<ControlTemplate TargetType="TabItem">
									<Grid Name="Panel" Margin="15">
										<ContentPresenter x:Name="ContentSite" VerticalAlignment="Center" HorizontalAlignment="Center" ContentSource="Header" />
									</Grid>
									<!--
									<ControlTemplate.Triggers>
										<Trigger Property="IsSelected" Value="True">
											<Setter TargetName="Panel" Property="Background" Value="LightSkyBlue" />
										</Trigger>
										<Trigger Property="IsSelected" Value="False">
											<Setter TargetName="Panel" Property="Background" Value="White" />
										</Trigger>
									</ControlTemplate.Triggers>
									-->
								</ControlTemplate>
							</Setter.Value>
						</Setter>
					</Style>

					<Style BasedOn="{StaticResource {x:Type TabControl}}" TargetType="{x:Type TabControl}">
						<Setter Property="Background" Value="Transparent" />
						<Setter Property="IsSynchronizedWithCurrentItem" Value="True" />
						<Setter Property="HorizontalAlignment" Value="Stretch" />
						<Setter Property="VerticalAlignment" Value="Stretch" />
						<Setter Property="TabStripPlacement" Value="Top" />
						<Setter Property="ItemContainerStyle">
							<Setter.Value>
								<Style BasedOn="{StaticResource {x:Type TabItem}}" TargetType="{x:Type TabItem}">
									<EventSetter Event="ButtonBase.Click" Handler="TabItem_Click" />
								</Style>
							</Setter.Value>
						</Setter>
					</Style>

				</TabControl.Resources>

				<TabControl.ItemTemplate>
					<DataTemplate>
						<materialDesign:Chip Margin="0 3.5" Content="{Binding Name}">
							<materialDesign:Chip.Icon>
								<materialDesign:PackIcon Kind="Console"/>
							</materialDesign:Chip.Icon>
						</materialDesign:Chip>
					</DataTemplate>
				</TabControl.ItemTemplate>

				<TabControl.ContentTemplate>
					<DataTemplate>
						<materialDesign:Card Margin="15" materialDesign:ShadowAssist.ShadowDepth="Depth4" materialDesign:ShadowAssist.ShadowEdges="All" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
							<consoles:ConsoleInstanceView DataContext="{Binding}" />
						</materialDesign:Card>
					</DataTemplate>
				</TabControl.ContentTemplate>

				<!--
				<TabItem>

					<TabItem.Header>
						<materialDesign:Chip Content="Twitter" IconBackground="{DynamicResource PrimaryHueDarkBrush}" IconForeground="{DynamicResource PrimaryHueDarkForegroundBrush}">
							<materialDesign:Chip.Icon>
								<materialDesign:PackIcon Kind="Twitter"></materialDesign:PackIcon>
							</materialDesign:Chip.Icon>
						</materialDesign:Chip>
					</TabItem.Header>

					<views:ConsoleInstanceView HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />

				</TabItem>
				-->

			</TabControl>

		</Grid>

		<Grid Grid.Row="1" Margin="15 0 15 0">

			<Separator Background="Black" BorderBrush="Black" Height="1" VerticalAlignment="Center" HorizontalAlignment="Stretch" />

			<Border HorizontalAlignment="Right" VerticalAlignment="Center" Background="{DynamicResource MaterialDesignPaper}" Margin="35 0 35 25" Padding="15 0">
				<Button
					Command="{Binding CreateConsole}"
					Style="{StaticResource MaterialDesignFloatingActionButton}">
					<materialDesign:PackIcon Kind="Console" />
				</Button>
			</Border>

		</Grid>

		<Path Style="{StaticResource logoVisualStyle}" />

	</Grid>

</Window>
